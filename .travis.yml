language: go

go:
  - master

install:
  - npm install typescript
  - go get github.com/spf13/hugo 

script:
  - cd src
  - tsc 
  - hugo -s hugo -d public --config config.toml -t ""

deploy:
  local_dir: src/hugo/public
  repo: aplagman/aplagman.github.io 
  target_branch: master
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  email: alexplagman@gmail.com
  name: "Alex Plagman"
  on:
    branch: master
